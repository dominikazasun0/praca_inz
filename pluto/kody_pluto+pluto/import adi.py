import adi
import matplotlib.pyplot as plt
import numpy as np
from scipy import signal
import statistics
import time
from datetime import datetime

błąd_05=[0.0155182017155795,0.004700101067872,0.00465357835057034,0.0186180113980186,0.010764461484932,0.00515669942180352,0.0272164602019131,0.0158702114047884,0.0123067696270383
,0.00116716475822187,0.0069274134208257,0.0121316038902464,0.0112698137149962,0.0132975059120284,0.00678151377421443,0.0197858949541754,0.00959989903088143,0.00345699179989367
,0.0254482782632692,0.0176673091460628,0.0106340973638481,0.02679239062671,0.0243187797016446,0.00735633380480039,0.026330730277877,0.00618350442433524
,0.00936941478011022,0.00389760189450072,0.000624466433464477,0.00422079278434495,0.0160375442936029,0.00128799385550593,0.00598839529131112]

błąd_04=[0.00797453032376938,0.0428673098684321,0.0178328946370158,0.0272074979098725,0.0333536154380255,0.0235918084054824,0.0144657895291495,0.00382191118402131
,0.0158712828052238,0.0048517397580724,0.00325659906531539,0.0315068666341652,0.0361964659691892,0.0101890375600725,0.0177924176996797,0.0111677715760706
,0.0103785084028246,0.0190411789517292,0.0432754128150513,0.0347403355457147,0.0589540766609765,0.0548420181335466,0.052208004968913,0.018784766744227,8.00618356734395E-05
,0.00837661695751068,0.0231470612133166,0.0119629485104241,0.0265915339625401,0.000236782629217225,0.0128674058133257,0.00556910717318859,0.0174499108612188]

błąd_03=[0.0360551302189577,0.0173820456326411,0.00178397035648031,0.0235400577362085,0.0335106140960278,0.0295902146559783,0.0210006770528509,0.00772938332181355
,0.0104286464818372,0.00170797305981124,0.00727619588368072,0.00756876814066204,0.00380618639443214,0.00999476074376276,0.0181872664619178,2.64439184249343E-05
,0.0242569291759736,0.000132430126174643,0.0106073944504786,0.0152119012572555,0.00745514456499025,0.0122166034350741,0.00511702925645635,0.00461878024875945
,0.00358652746679838,0.0255595653541477,0.0492848375762762,0.0245098545465766,0.0173929063767375,0.0169419545104745,0.0130515100068649,0.0167900151013043]
błąd_02=[0.0111874324913409,0.00422738488577395,0.0225576634192166,0.0326783759549414,0.01092404006788,0.0423665890093801,0.0155195051645826,0.0200626491963966
,0.0150512763403199,0.0229175636392178,9.51176491568728E-05,0.0341297498742293,0.0224964570661179,0.00462220459687829,0.00181492399776245,0.00824359259664148
,0.00495188137096464,0.000909378648224657,0.00443391917696018,0.0368721234159864,0.0115212372412977,0.0248468058243595,0.0155854665214889,0.0159328717297534
,0.0020813141970592,0.037503438022248,0.0175970623444222,0.0203704748259838,0.012248087895739,0.0208496841904136,0.0181534121710911]
błąd_01=[0.000868026105264624,0.00830356111078459,0.0337722250262558,0.0150019718139291,0.0305448387721498,0.00989076712667156,0.0158900629076427
,0.00147817196160246,0.00281016509508589,0.0111393431938524,0.0234379517863218,0.00178664003588266,0.0131064692785415,0.00871126694303684,8.10953537722925E-05
,0.012538050206436,0.013163470583541,0.00432632265441982,0.0253575417175099,0.0261746904677068,0.0333680637272394,0.028578426470942,0.0268206289837295
,0.0466811757950779,0.0180899612234683,0.0145341579250896,0.0227684968548601,0.0118637908032412,0.00847912686539018,0.0341948434879512,0.0194559956584271]

błąd_wz_05=[3.1036403431159,0.9400202135744,0.930715670114068,3.72360227960371,2.15289229698641,1.0313398843607,5.44329204038263,3.17404228095768
,2.46135392540765,0.233432951644374,1.38548268416514,2.42632077804927,2.25396274299925,2.65950118240568,1.35630275484289,3.95717899083508,1.91997980617629
,0.691398359978734,5.08965565265385,3.53346182921257,2.12681947276963,5.358478125342,4.86375594032893,1.47126676096008,5.26614605557541,1.23670088486705
,1.87388295602204,0.779520378900145,0.124893286692895,0.84415855686899,3.20750885872059,0.257598771101186,1.19767905826222]

błąd_wz_04=[1.99363258094235,10.716827467108,4.45822365925394,6.80187447746813,8.33840385950638,5.89795210137059,3.61644738228736,0.955477796005327
,3.96782070130594,1.2129349395181,0.814149766328848,7.87671665854131,9.04911649229731,2.54725939001812,4.44810442491991,2.79194289401766,2.59462710070615
,4.7602947379323,10.8188532037628,8.68508388642866,14.7385191652441,13.7105045333867,13.0520012422282,4.69619168605676,0.0200154589183599,2.09415423937767
,5.78676530332914,2.99073712760603,6.64788349063503,0.0591956573043062,3.21685145333142,1.39227679329715,4.36247771530471]

błąd_wz_03=[12.0183767396526,1.73820456326411,0.594656785493438,2.35400577362085,11.1702046986759,2.95902146559783,7.00022568428362,0.772938332181355
,3.47621549394574,0.170797305981124,2.42539862789358,0.756876814066204,1.26872879814405,3.33158691458759,1.81872664619178,0.00881463947497811,2.42569291759736
,0.0441433753915477,1.06073944504786,5.07063375241851,0.745514456499025,4.07220114502469,0.511702925645635,1.53959341625315,1.19550915559946,2.55595653541477
,16.4282791920921,2.45098545465766,5.79763545891249,1.69419545104745,4.35050333562165,1.67900151013043,2.92514575014337]

błąd_wz_02=[5.59371624567043,2.11369244288698,11.278831709603,16.3391879774707,5.46202003394,21.1832945046901,7.75975258229131,10.0313245981983
,7.52563817015997,11.4587818196089,0.0475588245784364,17.0648749371146,11.2482285330589,2.31110229843914,0.907461998881226,4.12179629832074,2.47594068548232
,0.454689324112328,2.21695958848009,18.4360617079932,5.76061862064883,12.4234029121798,7.79273326074445,7.96643586487669,1.0406570985296,18.751719011124
,8.7985311722111,10.1852374129919,6.1240439478695,10.4248420952068,9.07670608554553,0.191485896258919,17.5040270473129]

błąd_wz_01=[0.868026105264624,8.30356111078459,33.7722250262558,15.0019718139291,30.5448387721498,9.89076712667156,15.8900629076427
,1.47817196160246,2.81016509508589,11.1393431938524,23.4379517863218,1.78664003588266,13.1064692785415,8.71126694303684,0.0810953537722925,12.538050206436
,13.163470583541,4.32632265441982,25.35754171751,26.1746904677068,33.3680637272394,28.578426470942,26.8206289837295,46.6811757950779,18.0899612234683
,14.5341579250896,22.7684968548601,11.8637908032412,8.47912686539018,34.1948434879512,19.4559956584271,29.0240526460735,18.5591178362813]


srednia=[2.33563593254174,5.30646416320421,3.2246125018349,8.30519256686321,17.296983952066]
srednia_x=[0.1,0.2,0.3,0.4,0.5]

zmienne_lo_fs2M=[0.014945783816191,	0.0144448626688732,	0.0132636810630865,	0.0115621592295031,	0.0197646415921733,0.0101416967050622,0.0889981859102407,	1.63514510389963,	7.21681848802346,	0.0103133347323342,	0.0177822581755696,0.00880270492378615,	0.0353728734164264,	0.0168737069484001,	2.06152339775197,	0.00763059911886645]
#plt.plot(błąd_05)
#plt.plot(błąd_04)
#plt.plot(błąd_03)
#plt.plot(błąd_02)
#plt.plot(błąd_wz_05, 'ko-',label="0.5°")
#plt.plot(błąd_wz_04,'ko-',label="0.4°")
#plt.plot(błąd_wz_03, 'ko-',label="0.3°")
#plt.plot(błąd_wz_02,'ko-', label="0.2°")
"""
plt.plot(błąd_wz_01, 'ko-',label="0.1°")
plt.xlabel("Numer pomiaru [n]")
plt.title("Detekcja zmiany różnicy fazy o 0.1° \n lo=0.8GHz fs=6MHz fc=80kHz")
#plt.legend(loc='upper right')
plt.ylabel("Błąd względny pomiaru [%]")
plt.grid()
plt.savefig("wykres_0.1.svg")
plt.show()

plt.title("Detekcja zmiany różnicy fazy od 0.1° do 0.5°\n lo=0.8GHz fs=6MHz fc=80kHz")
plt.plot([0.5,0.4,0.3,0.2,0.1],srednia,'ko-')
plt.ylabel("Średnia błędu względnego pomiaru [%]")
plt.grid()
plt.xlabel("Detekowana róznica fazy [°]")
plt.savefig("wykres_podsum_średnia.svg")

plt.show()


plt.plot([0.5,0.6,0.7,0.8,0.9,1.0,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,2.0],zmienne_lo_fs2M,'ko-')
plt.xlabel("Częstotliwość LO [GHz]")
plt.title("Detekcja różnicy fazy przy zmiennym LO \n fs=2MHz fc=80kHz")
plt.ylabel("Średnia błedu pomiaru [°]")
plt.grid()
plt.savefig("wykres_zmienneLO_fs2M.svg")
plt.show()
"""
zmienne_lo_60k=[0.5,	0.6,	0.7,	0.75,	0.8,	0.9,	1,	1.1,	1.2,	1.25,	1.3,	1.4,	1.6,	1.7,	1.75,	1.8	,1.9,	2]
zmienne_lo_60k_6M=[0.00797758865358422,	0.0112447816787159,	0.0145838976199922,	0.00527085545434435,	0.0195211937778086,	0.00903004907703017	,0.0112962148250736,	0.0518952967978674	,0.0959724730734168	,1.89701054246346,	0.0691586047949827	,0.00919784802825678	,0.0191894129364443,	2.89450957472795,	0.0392788093627978,	0.0163814230019222	,0.0180958912643933	,0.0169445904720549]
plt.plot(zmienne_lo_60k,zmienne_lo_60k_6M,'ko-')
plt.xlabel("Częstotliwość LO [GHz]")
plt.title("Detekcja różnicy fazy przy zmiennym LO \n fs=6MHz fc=60kHz")
plt.ylabel("Średnia błedu pomiaru [°]")
plt.grid()
#plt.savefig("wykres_zmienneLO_fs6M_fc60k.svg")
plt.show()